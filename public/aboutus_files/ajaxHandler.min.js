let this_url=window.location.href;let regEmail=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;let regTelOrPhone=/^((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})))$/;let regNumber=/^\d+$/;let regCode=/^\d{6}$/;let regUrl=/^(http|https):\/\/(.+?)\.(.+)/;let showLoading=true;let newsDropdownList;$(document).on("click","a.text-ellipsis",function(){var a=$(this).attr("data-download-id");if(a!==undefined){console.log("infoId:"+a);$.ajaxJson("/ajax/downloadInfo",{infoId:a},function(b){})}});function getNewsDropdownList(b,a){let jsonObj={};jsonObj.classId=b;$.ajaxJson("/ajax/getNewsDropdownList",jsonObj,function(c){newsDropdownList=c.data;newsDropdownList.forEach(function(e,d){$("#ulYear").append('<li>\n                                <a data-val="'+e.year+'" href="javascript:;">'+e.year+"年</a>\n                            </li>")});$(".ui-form .ui-select").dropmenu({});if(a){a()}})}$(document).on("click","#ulYear a",function(){let thisYear=$(this).attr("data-val");$("#ulMonth li:gt(0)").remove();newsDropdownList.forEach(function(b,a){if(b.year==thisYear){b.month.forEach(function(d,c){$("#ulMonth").append('<li>\n                                <a data-val="'+d+'" href="javascript:;">'+d+"月</a>\n                            </li>")});$(".ui-form .ui-select22 li a").click(function(){$(".ui-select22").removeClass("focus");var d=$(this).text(),c=$(this).attr("data-val");$(".ui-form .ui-select22 p").text(d);$(".ui-form .ui-select22 p").attr("data-val",c)})}})});$(document).on("click",".search_list_btn",function(){let search_list_input=$(".search_list_input").val();if(search_list_input==""||search_list_input==$(".search_list_input").attr("placeholder")){layer.msg($(".search_list_input").attr("placeholder"));$(".search_list_input").focus();return}window.location.href=$(this).attr("data-search-url")+"_"+search_list_input+"_1.html"});$(document).on("keydown",".search_list_input",function(a){let index=$(".search_list_input").index($(this));if(a.which==13){$(".search_list_btn").eq(index).click()}});$(document).on("click",".video_t>.tag>span",function(){let tagId=$(this).attr("data-id");window.location.href=window.location.origin+window.location.pathname+"?tagId="+tagId});$(document).on("click",".search_list_btn_list",function(){let search_list_input=$(".search_list_input").val();let year=$(".ui-select11>p").text().replace("年","");let month=$(".ui-select22>p").text().replace("月","");if(year=="全部"){year=0}if(month=="全部"){month=0}window.location.href=$(this).attr("data-search-url")+"_"+year+"_"+month+"_"+search_list_input+"_1.html"});$(document).on("keydown",".search_list_input",function(a){let index=$(".search_list_input").index($(this));if(a.which==13){$(".search_list_btn_list").eq(index).click()}});$(document).on("click",".btn-search",function(){let index=$(".btn-search").index($(this));let searchKey=$(".text-search").eq(index).val();if(searchKey==""){layerMsg($(".text-search").eq(index).attr("placeholder"));$(".text-search").eq(index).focus();return false}window.location.href="/other/search_"+searchKey+"_1.html"});$(document).on("keydown",".text-search",function(a){let index=$(".text-search").index($(this));if(a.which==13){$(".btn-search").eq(index).click()}});$(document).on("click","img.image-code",function(){let formIndex=$("img.image-code").index($(this));getImageCode($(this),formIndex)});$(document).on("click",".reload-image-code",function(){let formIndex=$(".reload-image-code").index($(this));let $this=$("img.image-code:eq("+formIndex+")");getImageCode($this,formIndex)});$(".image-code").map(function(a){getImageCode($(this),a)});function getImageCode(b,a){$.getJSON("/image-code/get",{width:106,height:44,length:4},function(c){if(c.success){b.attr({src:c.data.base64Image,codeKey:c.data.codeKey,title:"看不清楚，换一张"}).css({cursor:"pointer"});$("input[name=codeKey]:eq("+a+")").val(c.data.codeKey)}})}function ajaxScrollTo(a,c,b){if(!b){b=300}if(!a){$("html,body").animate({scrollTop:0},b)}else{if(a.length>0){if(c==undefined){c=0}$("html,body").animate({scrollTop:$(a).offset().top-c},b)}}}$(document).on("click",".form-submit",function(){let $this=$(this);let form_action_url="/form/ajaxForm";let form_index=$(".form-submit").index($this);let formContainer=$(".form-post-item:eq("+form_index+")");if(required(formContainer)){let $this=formContainer;let params=$this.serializeArray();let jsonObj={};$.each(params,function(a,b){jsonObj[b.name]=b.value});$.ajaxJson(form_action_url,jsonObj,function(a){layer.alert(a.msg,{icon:1,closeBtn:0,title:"温馨提示"},function(b){layer.close(b);window.location.href=this_url})})}});$(document).on("keyup","input[name=jump_input]",function(){if(/([^\d]+)/.test($(this).val())){$(this).val("1")}else{if(parseInt($(this).val())>parseInt($(this).attr("data-page-max"))){$(this).val($(this).attr("data-page-max"))}}});$(document).on("keydown","input[name=jump_input]",function(a){if(a.which==13){if(parseInt($(this).val())>parseInt($(this).attr("data-page-max"))){layer.msg("输入的数字太大!")}else{if(parseInt($(this).val())==parseInt($(this).attr("data-page-index"))){layer.msg("当前就是第"+$(this).val()+"页")}else{if($(this).parents(".ajax-page-box").length>0){let $ajaxLoadPage=$(this).parents(".ajax-page-box");let pageUrl=$(this).attr("data-page-url")+"_"+$(this).val()+".html";$.ajaxGetPage(pageUrl,function(b){$ajaxLoadPage.html("");$ajaxLoadPage.html(b)})}else{window.location=$(this).attr("data-page-url")+"_"+$(this).val()+".html"}}}return false}});$(document).on("click",".jump_btn",function(a){let $jumpInput=$("input[name=jump_input]");if(parseInt($jumpInput.val())>parseInt($jumpInput.attr("data-page-max"))){layer.msg("输入的数字太大!")}else{if(parseInt($jumpInput.val())==parseInt($jumpInput.attr("data-page-index"))){layer.msg("当前就是第"+$jumpInput.val()+"页")}else{if($(this).parents(".ajax-page-box").size()>0){let $ajaxLoadPage=$(this).parents(".ajax-page-box");let pageUrl=$jumpInput.attr("data-page-url")+"_"+$jumpInput.val()+".html";$.ajaxGetPage(pageUrl,function(b){$ajaxLoadPage.html("");$ajaxLoadPage.html(b)})}else{window.location=$jumpInput.attr("data-page-url")+"_"+$jumpInput.val()+".html"}}}return false});$(document).on("click",".ajax-page-box .page a",function(){let $ajaxLoadPage=$(this).parents(".ajax-page-box");let pageUrl=$(this).attr("href");$.ajaxGetPage(pageUrl,function(a){$ajaxLoadPage.html("");$ajaxLoadPage.html(a)});return false});function getValue(a){return $.trim($(a).val())}function setFocusAndError(a){if(!a.parent().hasClass("has-error")){a.parent().addClass("has-error")}a.focus()}var required=function(a){$(".has-error").map(function(){$(this).removeClass("has-error")});let goon=true;let IsRunReg=false;a.find(".get:visible").map(function(){if(goon){IsRunReg=false;let val=getValue($(this));let placeholder=$(this).attr("placeholder");let errorMsg=$(this).attr("data-error");if($(this).hasClass("required")){if(val.length==0||$(this).val()==placeholder){if(placeholder!=""&&placeholder!=undefined){layer.msg(placeholder)}else{layer.msg("请输入必填信息!")}setFocusAndError($(this));goon=false}else{if(val.length==1&&val=="0"){let placeholder=$(this).attr("placeholder");if(placeholder!=""){layer.msg(placeholder)}else{layer.msg("请输入必填信息!")}setFocusAndError($(this));goon=false}}IsRunReg=true}if(!goon){return false}if(!IsRunReg){if(val!=undefined&&val.length>0&&val!=placeholder){IsRunReg=true}}if($(this).hasClass("tel")){if(IsRunReg&&!regTelOrPhone.test($(this).val())){layer.msg(errorMsg||"您输入手机号码的格式错误!");setFocusAndError($(this));goon=false}}else{if($(this).hasClass("card")){if(IsRunReg&&cardValid($(this).val())!=0){layer.msg(errorMsg||"您输入的身份证号码格式不正确!");setFocusAndError($(this));goon=false}}else{if($(this).hasClass("email")){if(IsRunReg&&!regEmail.test($(this).val())){layer.msg(errorMsg||"您输入邮箱的格式错误!");setFocusAndError($(this));goon=false}}else{if($(this).hasClass("postalcode")){if(IsRunReg&&!regCode.test($(this).val())){layer.msg(errorMsg||"您输入的邮政编码格式不正确!");setFocusAndError($(this));goon=false}}else{if($(this).hasClass("number")){if(IsRunReg&&!regNumber.test($(this).val())){layer.msg(errorMsg||"您输入的不是正整数!");setFocusAndError($(this));goon=false}if(IsRunReg&&$(this).attr("min")){if(Number($(this).val().length)<Number($(this).attr("min"))){layer.msg(errorMsg||"您输入的值过小!");setFocusAndError($(this));goon=false}}if(IsRunReg&&$(this).attr("max")){if(Number($(this).val().length)>Number($(this).attr("max"))){layer.msg(errorMsg||"您输入的值过大!");setFocusAndError($(this));goon=false}}}else{if($(this).hasClass("weburl")){if(IsRunReg&&!regUrl.test($(this).val())){layer.msg(errorMsg||"您输入的网址格式不正确!");setFocusAndError($(this));goon=false}}}}}}}}});return goon};let msgTemp="";let layerIndex=0;let clientWidth88=(document.documentElement.clientWidth*0.88);let clientHeight80=(document.documentElement.clientHeight*0.8);function layerMsg(a){layer.msg(a)}function layerMsgAndRefresh(b,a){if(a==undefined){window.location.href=window.location.href}else{window.location.href=a}layerMsg(b)}function getQueryString(a){let reg=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");let r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2])}return null}function taleAlert(a){let tale=new $.tale();tale.alertOk(a)}function layerAlert(a){layer.alert(a,{icon:6})}function layerOpenHtml(a,b){if(b==true){layerIndex=layer.open({type:1,title:false,closeBtn:1,shadeClose:true,area:["350px","350px"],skin:"layui-layer-nobg",content:a})}else{layer.open({type:1,title:false,closeBtn:1,shadeClose:true,skin:"layui-layer-nobg",content:a})}}function layerCutImage(f,c,a,b,e,d){layerIndex=layer.open({type:2,title:f,shadeClose:true,shade:0.8,area:[c+"px",a+"px"],content:b,btn:["确定","取消"],yes:function(g){e(g)},btn2:function(g){d(g)},cancel:function(g){d(g)}})}function layerOpenFull(b,a){layerIndex=layer.open({title:b,type:2,content:a,area:[clientWidth88+"px",clientHeight80+"px"],maxmin:true})}function layerOpenIframe(e,c,a,b,d){layerIndex=layer.open({type:2,title:e,shadeClose:true,shade:0.8,area:[c+"px",a+"px"],content:b,btn:["确定","取消"],yes:function(f){d(f)},cancel:function(f){layer.close(f)}})}function layerClose(a){layer.close(a)}function layerConfirm(e,b,a,d,c){let confirm_index=layer.confirm(e,{title:"温馨提示",btn:[b,a]},function(){layerClose(confirm_index);d()},function(){c()})}function getFrame(a){return document.getElementById(a).contentWindow.document}function layerLoading(){layer.load()}function layerCloseLoading(){layer.closeAll("loading")}$.extend({ajaxJson:function(a,b,c){let thisIndex=-1;if(showLoading){thisIndex=layer.msg("数据请求中，请稍后…",{time:0,icon:16})}$.ajax(a,{type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify(b),dataType:"json",success:function(d){if(showLoading){layer.close(thisIndex)}if(c){if(d.success){c(d)}else{if(d.data!=undefined){layerMsg(d.data)}else{layerMsg(d.msg)}}}},error:function(d){if(showLoading){layer.close(thisIndex)}layerMsg("服务器繁忙，请稍后重试。")}})},ajaxGetPage:function(a,b){if(a=="javascript:void(0);"||a==""||a=="javascript:;"||a=="#"||a=="##"||a=="###"){return false}if(a.indexOf("?")==-1){a+="?v="+Math.random()}else{a+="&v="+Math.random()}let thisIndex=-1;if(showLoading){thisIndex=layer.msg("数据请求中，请稍后…",{time:0,icon:16})}$.ajax(a,{type:"GET",url:a,success:function(c){if(showLoading){layer.close(thisIndex)}if(b){b(c)}},error:function(c){if(showLoading){layer.close(thisIndex)}layerMsg("服务器繁忙，请稍后重试。")}})}});$(function(){let MenuName=$.trim($("div.ui-breadcrumb>div.main-container>a:eq(1)").text());$("div.ui-header>div.header-main>div.main-container>ul.navigation>li>a").map(function(){if($.trim($(this).text())==MenuName){$(this).parent().addClass("active").siblings().removeClass("active")}});let MenuNameTwo=$.trim($("div.ui-breadcrumb>div.main-container>a:eq(2)").text());let MenuNameThree=$.trim($("div.ui-breadcrumb>div.main-container>a:eq(3)").text());let MenuNameFours=$.trim($("div.ui-breadcrumb>div.main-container>a:eq(4)").text());$("div.ui-sider-menu>ul>li>div.top-menu>a").map(function(){if($.trim($(this).text())==MenuNameTwo){$(this).parent().parent().addClass("active").siblings().removeClass("active");$(this).parent().siblings().show();$(this).parents("li").find(".menu-list>a").map(function(){let _that=$(this);if($.trim(_that.text())==MenuNameThree){_that.addClass("active").siblings().removeClass("active")}});$(this).parents("li").find(".menu-list>div.ThirdNav>a").map(function(){let _that=$(this);if($.trim(_that.text())==MenuNameFours){_that.parent().prev("div").addClass("active");_that.addClass("active").siblings().removeClass("active")}})}})});